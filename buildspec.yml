version: 0.2

phases:
  install:
    runtime-versions:
      java: corretto17
    commands:
      - wget -q -O apache-maven-3.9.4.tar.gz https://downloads.apache.org/maven/maven-3/3.9.4/binaries/apache-maven-3.9.4-bin.tar.gz
      - tar xzf apache-maven-3.9.4.tar.gz
      - export MVN_HOME=$(pwd)/apache-maven-3.9.4
      - export PATH=${MVN_HOME}/bin:${PATH}


  build:
    commands:
      - mvn -B -DskipTests clean package

  post_build:
    commands:
      - mvn test
      - junit 'target/surefire-reports/*.xml'
      - ./jenkins/scripts/deliver.sh
